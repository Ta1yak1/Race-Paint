<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="/socket.io/socket.io.js"></script>
    <script src="//cdn.jsdelivr.net/phaser/2.5.0/phaser.min.js"></script>
    
    <title>RacePaint</title>
</head>
<body>
    <h1>hello World</h1>
</body>

<script type='text/javascript'>
    window.onload = function () {
    
                //  Note that this html file is set to pull down Phaser 2.5.0 from the JS Delivr CDN.
                //  Although it will work fine with this tutorial, it's almost certainly not the most current version.
                //  Be sure to replace it with an updated version before you start experimenting with adding your own code.
    
    
                var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update });
    
                var i;
                var r;
                var bmd;
                var bmdDest;
                var colors;
    
                function preload() {
                    game.load.image('dude', 'assets/dude.png');
                    game.load.image('diamond', 'assets/diamond.png');
                }
    
                function create() {
                    //bitmap data
                    bmd = game.make.bitmapData(game.width, game.height);
                    bmdDest = game.make.bitmapData(game.width, game.height);
                    
                    bmd.context.fillStyle = '#ffffff';

                    var bg = game.add.sprite(0,0,bmd);

                    bmdDest.addToWorld();
                    colors = Phaser.Color.HSVColorWheel();
                    game.input.addMoveCallback(paint, this);
                    i = 0;
                    r = new Phaser.Rectangle(0, 0, game.width, game.height);
                    data = { r: 0, s: 0.5 };
                    game.add.tween(data).to({ r: 360, s: 2 }, 2000, Phaser.Easing.Sinusoidal.InOut, true, 0, Number.MAX_VALUE, true);
    
                    //sprite creation
                    game.physics.startSystem(Phaser.Physics.P2JS);
    
                    player = game.add.sprite(200, 200, 'diamond');
                    game.physics.p2.enable(player);
                    game.physics.p2.setBoundsToWorld(true, true, true, true, false);
    
                    cursors = game.input.keyboard.createCursorKeys();
    
                }
    
                function paint(pointer, x, y) {
    
                    if (pointer.isDown) {
                        //  Change the 4 - the width of the pen, to anything you like
                        bmd.circle(x, y, 4, colors[i].rgba);
    
                        i = game.math.wrapValue(i, 1, 359);
                    }
    
                }
    
                function update() {
    
                    //  Change the 0.1 to something like 0.5 for a shorter 'trail'
                    bmdDest.fill(0, 0, 0, 0);
    
                    //  Change the 0.7 at the end, it's the alpha value, lower it for a softer effect
                    bmdDest.copy(bmd, 0, 0);

                    bmd.context.fillRect(player.x,player.y, 5,5);
                    bmd.dirty = true;
    
                    if (cursors.left.isDown) {
                        player.body.rotateLeft(100);
                    }
                    else if (cursors.right.isDown) {
                        player.body.rotateRight(100);
                    }
                    else{
                        player.body.setZeroRotation();
                    }
                    if (cursors.up.isDown) {
                        player.body.thrust(150);
                        
                        //poop trail
                        
                    }
                    else if (cursors.down.isDown) {
                        player.body.reverse(100);
                    }
    
                }
            }
    
</script>
</html>

